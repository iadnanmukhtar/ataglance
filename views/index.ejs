<!DOCTYPE html>
<html>
<head>
  <title>Quran at a Glance - Browsable Quranic Themes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
  <link href="/stylesheets/style.css" rel="stylesheet">

  <link rel="image_src" href="/images/icon.png" />
  <link rel="apple-touch-icon" href="/images/icon.png" />
  <link rel="icon" href="/images/icon.png" />

  <meta name="encoding" content="UTF-8">
  <meta name="description" content="Browsable Summary and description of major topics and themes of the Quran.">

  <meta itemprop="name" content="Quran at a Glance - Browsable Quranic Themes">
  <meta itemprop="description" content="Browsable Summary and description of major topics and themes of the Quran.">
  <meta itemprop="image" content="https://quranataglance.com/images/icon.png">

  <meta property="og:site_name" content="Quran at a Glance">
  <meta property="og:locale" content="en">
  <meta property="og:url" content="https://quranataglance.com">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Quran at a Glance - Browsable Quranic Themes">
  <meta property="og:description" content="Browsable Summary and description of major topics and themes of the Quran.">
  <meta property="og:image" content="https://quranataglance.com/images/icon.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Quran at a Glance - Browsable Quranic Themes">
  <meta name="twitter:description" content="Browsable Summary and description of major topics and themes of the Quran.">
  <meta name="twitter:image" content="https://quranataglance.com/images/icon.png">

  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "http://quranataglance.com",
      "icon": "https://quranataglance.com/images/icon.png"
    }
  </script>

  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "WebSite",
      "url": "http://quranataglance.com",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "http://quranataglance.com/?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
  </script>

</head>
<body>

  <div class="col-lg-8 mx-auto p-3 py-md-5">

    <header class="d-flex align-items-center pb-3 mb-3 border-bottom">
      <a href="/" class="d-flex align-items-center text-dark text-decoration-none">
        <img class="me-2" src="/images/logo.png" width="40">
        <h1 class="fs-4">Quran at a Glance</h1>
      </a>
      <div class="ms-auto">
        <form class="d-flex" action="/" method="GET">
          <input class="form-control form-control-sm me-2" size="15" name="q" type="search" placeholder="Search" aria-label="Search">
          <button class="btn btn-sm btn-outline-success" type="submit">Go</button>
        </form>
      </div>
    </header>

    <main class="row">

      <p class="col-12">
        Easily grasp the structure of the Holy Quran by browsing the summary and description of its major topics and themes, all in a form of the following table of contents.
      </p>

      <div class="col-12 dropdown mb-2">
        <button class="btn btn-success dropdown-toggle w-100" type="button" id="suraList" data-bs-toggle="dropdown" aria-expanded="false">
          Suras &amp; Bookmarks
        </button>
        <ul class="dropdown-menu w-100" aria-labelledby="suraList">
          <div id="BOOKMARKS">
          </div>          
          <%
            for (var i = 0; i < md.sura.length; i++) {
          %>
            <li><a class="dropdown-item" href="#S<%= (i+1) %>">
              <% if (md.sura[i].type === 'Meccan') { %>ðŸ•‹<% } else { %>ðŸ•Œ<% } %>
              <%= i+1 %>. <%= md.sura[i].tname %> <span lang="ar"><%= md.sura[i].name %></span> 
              </a>
            </li>
          <% } %>
        </ul>
      </div>

      <div class="col-12">
      
      <% 
        var sura=0; 
        for (var i=0; i < toc.length; i++) { 
          var id = toc[i].sura + '_' + toc[i].range;
          var range = (toc[i].range + '').split('-');
          if (range.length == 1)
            range.push(range[0]);
          var anchors = [];
          for (var r = range[0]; r <= range[1]; r++)
            anchors.push(toc[i].sura + '_' + r);
          if (toc[i].sura != sura) { 
            sura = toc[i].sura; 
            if (sura > 1) { %>
              </div>
            <% } %>
          
          <h2 id="S<%= sura %>" class="mt-2">Sura <span lang="ar"><%= md.sura[sura-1].name %></span> <%= sura %> <%= md.sura[sura-1].tname %> (<%= md.sura[sura-1].ename %>)</h2>
          <div class="accordion" id="SURATOPICS_<%= sura %>">

          <% } %>

            <div class="accordion-item">
              <h3 id="TOPICHEAD_<%= id %>" class="accordion-header" data-id="<%= id %>">
                <button class="accordion-button collapsed row" type="button" data-bs-toggle="collapse" data-bs-target="#TOPICTEXT_<%= id %>" aria-expanded="false" aria-controls="TOPICTEXT_<%= id %>">
                  <% for (var a = 0; a < anchors.length; a++) { %><span id="A<%= anchors[a] %>"></span><% } %>
                  <div class="col">
                    <div id="TOPICREF_<%= toc[i].ref %>" class="topic">
                      <i data-id="<%= id %>" class="me-2 far fa-bookmark"></i><a href="#TOPICHEAD_<%= id %>"><%= toc[i].topics %></a>
                    </div>
                    <div class="ref d-block d-sm-none mt-1">
                      <a href="#top"><i class="me-2 far fa-hand-point-up"></i></a><small><%= sura %>:<%= toc[i].range %></small>
                    </div>
                    <% if (admin) { %>
                    <div class="admin-ctrls" style="display:none">
                      Tags: <span id="TOPICTAGS_<%= toc[i].ref %>" contenteditable="true" style="width: 100%; display:inline-block;"><%= toc[i].tags %></span><br>
                      Range: <span id="TOPICRANGE_<%= toc[i].ref %>" contenteditable="true"><%= toc[i].range %></span>
                      <small><a class="admin-ctrl-update" data-ref="<%= toc[i].ref %>" href="#">Update</a></small>
                    </div>
                    <% } %>
                  </div>
                  <div class="ref col-2 text-end text-nowrap me-2 me-md-0 d-none d-sm-block">
                    <span class="badge rounded-pill bg-success"><%= sura %>:<%= range[0] %></span><a href="#top"><i class="ms-2 far fa-hand-point-up"></i></a>
                  </div>
                </button>
              </h3>
              <section id="TOPICTEXT_<%= id %>" class="accordion-collapse collapse" aria-labelledby="TOPICHEAD_<%= id %>" data-bs-parent="#SURATOPICS_<%= sura %>">
                <div class="accordion-body">
                  <div class="row">
                    <div class="col-md-6 col-12 trans"></div>
                    <div lang="ar" class="col-md-6 col-12 text"></div>
                  </div>
                  <div class="row">
                    <div class="col-12 more">
                      <a target="qu" href="https://quranunlocked.com/<%= toc[i].sura %>/<%= range[0] %>">More Translations&hellip;</a>
                    </div>
                  </div>
                </div>
              </section>
            </div>

      <% } %>
        </div>
      </div>

    </main>
  </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/3c8decddde.js" crossorigin="anonymous"></script>
  <script src="/javascripts/script.js"></script>

    <% if (admin) { %>
      <script>
        $('.accordion-item .topic').dblclick(function () {
            $(this).attr('contenteditable', 'true');
            $(this).parent().find('.admin-ctrls').show();
        });
        $('.admin-ctrl-update').click(function () {
            console.log('triggered');
            var ref = $(this).data('ref');
            var topics = $('#TOPICREF_' + ref).text();
            var range = $('#TOPICRANGE_' + ref).text();
            var tags = $('#TOPICTAGS_' + ref).text();
            $.post('/u', {
                ref: ref,
                range: range,
                topics: topics,
                tags: tags
            }, function (data) {
                history.go(0);
                return true;
            }).fail(function (err) {
                alert('Error updating item: ' + err.status + ' ' + err.statusText);
            });
        });
      </script>
    <% } %>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-406B5QQ1B0"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-406B5QQ1B0');
  </script>

</body>
</html>